var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},e.parcelRequired7c6=r),r("krGWQ"),r("7rYDH"),r("8j3eh");var a=r("kcvyG"),n=r("8j3eh"),i=r("ayzP0");window.addEventListener("load",a.default),window.addEventListener("load",n.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick),r("9AkgD"),r("hPewW"),r("kcvyG"),r("gLIqC"),r("fobnT");var s=r("7rYDH"),c=r("bQoWw");const l=document.querySelector(".modal-card__backdrop"),d=document.querySelector(".cards__list"),u=document.querySelector("body"),f=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),m=new(0,s.FilmAPI);d.addEventListener("click",(async function(e){if(console.log(e.target.closest(".cart-items")),m.youTubeID=e.target.closest(".card-item").dataset.id,localStorage.setItem("LOCALSTORAGE_KEY",`${e.target.closest(".card-item").dataset.id}`),!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const o=await m.fetchDetails(t);(0,c.default)(o),u.classList.add("no-scroll"),l.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(u.classList.remove("no-scroll"),l.classList.add("hidden"))})),f.addEventListener("click",(e=>{u.classList.remove("no-scroll"),l.classList.add("hidden")})),l.addEventListener("click",(e=>{e.target===l&&(l.classList.add("hidden"),u.classList.remove("no-scroll"))})),r("bQoWw");var g=r("4O2bx"),h=(s=r("7rYDH"),r("7Y9D8")),v=r("eyjy7"),y=r("bcNH0");const w=new(0,s.FilmAPI),b=new(0,g.DatabaseAPI),p=document.querySelector(".cards__list"),L=document.querySelector(".modal-card");let E="";const N=async()=>{const e=document.querySelector("[data-card-modal-watched-film]"),t=document.querySelector("[data-card-modal-queue-film]");(0,v.onAuthStateChanged)(y.auth,(o=>{o?(e.removeAttribute("disabled"),t.removeAttribute("disabled")):(e.setAttribute("disabled",""),t.setAttribute("disabled",""),h.Block.dots(".modal-card__btn-wrapper","Log in to add movies to library",{svgSize:"70px",svgColor:"#66000000",backgroundColor:"rgba(255,255,255,0.5)"}))}))},S=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"},T=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"},k=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"},q=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"};p.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{setTimeout(N,200),E=Number(e.target.closest(".card-item").dataset.id);const t=await b.checkPresenseInWatched(E);t?S():t||k();const o=await b.checkPresenseInQueue(E);o?T():o||q()}catch(e){h.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),L.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await w.fetchDetails(E);await b.addToWatched(e),h.Notify.success(`${e.title} added to Watched List`),S();await b.checkPresenseInQueue(E)&&(q(),await b.removeMovieFromQueue(E),h.Notify.success(`${e.title} removed from Queue List`))}}catch(e){h.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await w.fetchDetails(E);await b.addToQueue(e),h.Notify.success(`${e.title} added to Queue List`),T();await b.checkPresenseInWatched(E)&&(k(),await b.removeMovieFromWatched(E),h.Notify.success(`${e.title} removed from Watched List`))}}catch(e){h.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),L.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await b.removeMovieFromWatched(E),h.Notify.success("Movie removed from Watched List"),k()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await b.removeMovieFromQueue(E),h.Notify.success("Movie removed from Queue List"),q())}catch(e){h.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),r("2nhTy");y=r("bcNH0"),v=r("eyjy7");var x=r("5Zbuc");h=r("7Y9D8");(async()=>{(0,v.onAuthStateChanged)(y.auth,(e=>{e?(x.refs.openModalHomeBtn.classList.add("log-out"),x.refs.openModalHomeBtn.setAttribute("title","Click to Log Out"),x.refs.openModalHomeBtn.classList.remove("log-in")):(x.refs.openModalHomeBtn.classList.remove("log-out"),x.refs.openModalHomeBtn.setAttribute("title","Click to Log In"),x.refs.openModalHomeBtn.classList.add("log-in"))}))})();x.refs.registerForm.addEventListener("submit",(async e=>{e.preventDefault();const t=x.refs.registerEmail.value,o=x.refs.registerPassword.value;try{await(0,v.createUserWithEmailAndPassword)(y.auth,t,o);x.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),h.Notify.success("You are registered. Have fun!")}catch(e){"Firebase: Password should be at least 6 characters (auth/weak-password)."===e.message&&h.Notify.warning("Password should be at least 6 characters"),"Firebase: Error (auth/email-already-in-use)."===e.message&&h.Notify.warning("User with this email is already registered"),"Firebase: Error (auth/invalid-email)."===e.message&&h.Notify.warning("Please enter right email"),"Firebase: Error (auth/missing-password)."===e.message&&h.Notify.warning("Please enter password")}}));x.refs.loginForm.addEventListener("submit",(async e=>{e.preventDefault();const t=x.refs.loginEmail.value,o=x.refs.loginPassword.value;try{await(0,v.signInWithEmailAndPassword)(y.auth,t,o);x.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),h.Notify.success("You are loged in. Welcome back!")}catch(e){"Firebase: Error (auth/missing-password)."===e.message&&h.Notify.warning("Please enter password"),"Firebase: Error (auth/invalid-email)."===e.message&&h.Notify.warning("Please enter right email"),"Firebase: Error (auth/user-not-found)."===e.message&&h.Notify.warning("User not found. Please check if you entered right email and password"),"Firebase: Error (auth/wrong-password)."===e.message&&h.Notify.warning("You entered wrong password")}}));x.refs.openModalHomeBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,v.signOut)(y.auth),h.Notify.success("You are loged out. See you soon"))}));const F=()=>{x.refs.loginForm.classList.toggle("login-hidden"),x.refs.registerForm.classList.toggle("register-hidden")};(x=r("5Zbuc")).refs.showLoginBtn.addEventListener("click",F),x.refs.showRegisterBtn.addEventListener("click",F);const M=e=>{e.target.classList.contains("log-in")?x.refs.modal.classList.remove("auth-modal-is-hidden"):e.target.classList.contains("auth-modal-close")&&x.refs.modal.classList.add("auth-modal-is-hidden")};x.refs.openModalHomeBtn.addEventListener("click",M),x.refs.closeModalBtn.addEventListener("click",M),r("hvQmF");var O={},P=/^\s+|\s+$/g,A=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,D=/^0o[0-7]+$/i,_=parseInt,I="object"==typeof e&&e&&e.Object===Object&&e,W="object"==typeof self&&self&&self.Object===Object&&self,H=I||W||Function("return this")(),j=Object.prototype.toString,Y=Math.max,Q=Math.min,B=function(){return H.Date.now()};function $(e,t,o){var r,a,n,i,s,c,l=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var o=r,n=a;return r=a=void 0,l=t,i=e.apply(n,o)}function g(e){return l=e,s=setTimeout(v,t),d?m(e):i}function h(e){var o=e-c;return void 0===c||o>=t||o<0||u&&e-l>=n}function v(){var e=B();if(h(e))return y(e);s=setTimeout(v,function(e){var o=t-(e-c);return u?Q(o,n-(e-l)):o}(e))}function y(e){return s=void 0,f&&r?m(e):(r=a=void 0,i)}function w(){var e=B(),o=h(e);if(r=arguments,a=this,c=e,o){if(void 0===s)return g(c);if(u)return s=setTimeout(v,t),m(c)}return void 0===s&&(s=setTimeout(v,t)),i}return t=U(t)||0,R(o)&&(d=!!o.leading,n=(u="maxWait"in o)?Y(U(o.maxWait)||0,t):n,f="trailing"in o?!!o.trailing:f),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},w.flush=function(){return void 0===s?i:y(B())},w}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==j.call(e)}(e))return NaN;if(R(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=R(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(P,"");var o=C.test(e);return o||D.test(e)?_(e.slice(2),o?2:8):A.test(e)?NaN:+e}O=function(e,t,o){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return R(o)&&(r="leading"in o?!!o.leading:r,a="trailing"in o?!!o.trailing:a),$(e,t,{leading:r,maxWait:t,trailing:a})},window.addEventListener("scroll",O((function(){console.log("scroll scroll");const e=document.querySelector(".scroll-to-top");document.body.scrollTop>550||document.documentElement.scrollTop>550?e.style.display="flex":e.style.display="none"}),1e3)),r("ayzP0");var G={};G=function e(t,o,r){function a(i,s){if(!o[i]){if(!t[i]){var c=void 0;if(!s&&c)return c(i,!0);if(n)return n(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[i]={exports:{}};t[i][0].call(d.exports,(function(e){return a(t[i][1][e]||e)}),d,d.exports,e,t,o,r)}return o[i].exports}for(var n=void 0,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.create=o.visible=void 0;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=document.createElement("div");return o.innerHTML=e.trim(),!0===t?o.children:o.firstChild},a=function(e,t){var o=e.children;return 1===o.length&&o[0].tagName===t},n=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};o.visible=n,o.create=function(e,t){var o=function(e,t){var o=r('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),n=o.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return n.appendChild(e)}));var i=a(n,"IMG"),s=a(n,"VIDEO"),c=a(n,"IFRAME");return!0===i&&o.classList.add("basicLightbox--img"),!0===s&&o.classList.add("basicLightbox--video"),!0===c&&o.classList.add("basicLightbox--iframe"),o}(e=function(e){var t="string"==typeof e,o=e instanceof HTMLElement==1;if(!1===t&&!1===o)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(r(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),i=function(e){return!1!==t.onClose(s)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===n(e)||e.parentElement.removeChild(e),t()}),410),!0}(o,(function(){if("function"==typeof e)return e(s)}))};!0===t.closable&&o.addEventListener("click",(function(e){e.target===o&&i()}));var s={element:function(){return o},visible:function(){return n(o)},show:function(e){return!1!==t.onShow(s)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(o,(function(){if("function"==typeof e)return e(s)}))},close:i};return s}},{}]},{},[1])(1);new(0,(s=r("7rYDH")).FilmAPI);function z(e){console.log(e,"url");G.create(`<iframe\n      width="960"\n      height="515"\n      src="https://www.youtube.com/embed/${e}"\n      title="YouTube video player"\n      frameborder="0"\n      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"\n      allowfullscreen\n    ></iframe>`).show()}const K=new(0,(s=r("7rYDH")).FilmAPI),Z=document.querySelector(".modal-card__watch-video");console.log(K),Z.addEventListener("click",(e=>{K.youTubeID=localStorage.getItem("LOCALSTORAGE_KEY"),K.fetchYouTube().then((e=>{console.log(e.results);const t=e.results.filter((e=>e.name.includes("Official")));console.log(t),z(t[0].key)}))}));
//# sourceMappingURL=index.8050e6dc.js.map
