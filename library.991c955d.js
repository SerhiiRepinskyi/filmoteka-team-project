var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},e.parcelRequired7c6=a),a("krGWQ"),a("7rYDH"),a("8j3eh");var n=a("8j3eh"),i=a("ayzP0");window.addEventListener("load",n.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var o=a("4O2bx"),r=a("dSs1Y"),l=a("7Y9D8"),d=a("krGWQ"),c=a("eVEnd");function u(e){return e.map((({id:e,title:t,poster_path:s,release_date:a,genres:n})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,c.getMoviePoster)(s)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,c.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,c.getGenresLib)(n)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,c.getReleaseDate)(a)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}const f=new(0,o.DatabaseAPI);async function L(){r.Loading.pulse({svgColor:"#b92f2c"});try{const e=u(await f.getWatchedList());d.refs.libGalleryEl.insertAdjacentHTML("beforeend",e),r.Loading.remove(),window.removeEventListener("load",L)}catch(e){console.log(e),l.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}}r=a("dSs1Y"),d=a("krGWQ");async function b(){r.Loading.pulse({svgColor:"#b92f2c"});const e=u(await f.getQueueList());d.refs.libGalleryEl.insertAdjacentHTML("beforeend",e),r.Loading.remove()}function v(e){const t=e.target;t===d.refs.buttonWatchedEl?(d.refs.libGalleryEl.innerHTML="",L(),d.refs.buttonWatchedEl.classList.contains("lib--active")||(d.refs.buttonWatchedEl.classList.add("lib--active"),d.refs.buttonQueueEl.classList.remove("lib--active"))):t===d.refs.buttonQueueEl&&(d.refs.libGalleryEl.innerHTML="",b(),d.refs.buttonQueueEl.classList.contains("lib--active")||(d.refs.buttonWatchedEl.classList.remove("lib--active"),d.refs.buttonQueueEl.classList.add("lib--active")))}(d=a("krGWQ")).refs.buttonWatchedEl.addEventListener("click",v),d.refs.buttonQueueEl.addEventListener("click",v),window.addEventListener("load",L),a("9AkgD"),a("hPewW"),a("bQoWw");var m=a("7rYDH"),g=a("bQoWw");const p=document.querySelector(".modal-card__backdrop"),y=document.querySelector(".library-cards__list"),h=document.querySelector("body"),w=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),E=new(0,m.FilmAPI);y.addEventListener("click",(async function(e){if(!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const s=await E.fetchDetails(t);(0,g.default)(s),h.classList.add("no-scroll"),p.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(h.classList.remove("no-scroll"),p.classList.add("hidden"))})),w.addEventListener("click",(e=>{h.classList.remove("no-scroll"),p.classList.add("hidden")})),p.addEventListener("click",(e=>{e.target===p&&(p.classList.add("hidden"),h.classList.remove("no-scroll"))})),a("gLIqC"),a("fobnT");var _=a("bcNH0"),k=a("eyjy7"),M=a("5Zbuc");l=a("7Y9D8");const Q=(0,k.getAuth)(_.firebaseApp);(async()=>{(0,k.onAuthStateChanged)(Q,(e=>{e?(M.refs.openModalLibraryBtn.classList.add("log-out"),M.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),M.refs.openModalLibraryBtn.classList.remove("log-in")):(M.refs.openModalLibraryBtn.classList.remove("log-out"),M.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),M.refs.openModalLibraryBtn.classList.add("log-in"))}))})();M.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,k.signOut)(Q),l.Notify.success("You are loged out. See you soon"),setTimeout((()=>window.location.replace("./index.html")),2e3))})),a("4O2bx"),a("hvQmF"),a("ayzP0");
//# sourceMappingURL=library.991c955d.js.map
