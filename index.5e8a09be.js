var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=o),o("krGWQ"),o("7rYDH"),o("8j3eh");var r=o("kcvyG"),s=o("8j3eh"),i=o("ayzP0");window.addEventListener("load",r.default),window.addEventListener("load",s.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick),o("9AkgD"),o("hPewW"),o("kcvyG"),o("gLIqC"),o("fobnT"),o("dBnbE"),o("bQoWw");var n=o("4O2bx"),d=o("7rYDH"),c=o("7Y9D8"),l=o("eyjy7"),u=o("bcNH0");const f=new(0,d.FilmAPI),m=new(0,n.DatabaseAPI),g=document.querySelector(".cards__list"),h=document.querySelector(".modal-card");let v="";const y=async()=>{const e=document.querySelector("[data-card-modal-watched-film]"),t=document.querySelector("[data-card-modal-queue-film]");(0,l.onAuthStateChanged)(u.auth,(a=>{a?(e.removeAttribute("disabled"),t.removeAttribute("disabled")):(e.setAttribute("disabled",""),t.setAttribute("disabled",""),c.Block.dots(".modal-card__btn-wrapper","Log in to add movies to the library",{messageMaxLength:50,svgSize:"70px",svgColor:"#66000000",backgroundColor:"rgba(255,255,255,0.5)"}))}))},w=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"},p=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"},b=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"},L=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"};g.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{setTimeout(y,200),v=Number(e.target.closest(".card-item").dataset.id);const t=await m.checkPresenseInWatched(v);t?w():t||b();const a=await m.checkPresenseInQueue(v);a?p():a||L()}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),h.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await f.fetchDetails(v);await m.addToWatched(e),c.Notify.success(`${e.title} added to Watched List`),w();await m.checkPresenseInQueue(v)&&(L(),await m.removeMovieFromQueue(v),c.Notify.success(`${e.title} removed from Queue List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await f.fetchDetails(v);await m.addToQueue(e),c.Notify.success(`${e.title} added to Queue List`),p();await m.checkPresenseInWatched(v)&&(b(),await m.removeMovieFromWatched(v),c.Notify.success(`${e.title} removed from Watched List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),h.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await m.removeMovieFromWatched(v),c.Notify.success("Movie removed from Watched List"),b()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await m.removeMovieFromQueue(v),c.Notify.success("Movie removed from Queue List"),L())}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),o("2nhTy");u=o("bcNH0"),l=o("eyjy7");var E=o("5Zbuc");c=o("7Y9D8");(async()=>{(0,l.onAuthStateChanged)(u.auth,(e=>{e?(E.refs.openModalHomeBtn.classList.add("log-out"),E.refs.openModalHomeBtn.setAttribute("title","Click to Log Out"),E.refs.openModalHomeBtn.classList.remove("log-in")):(E.refs.openModalHomeBtn.classList.remove("log-out"),E.refs.openModalHomeBtn.setAttribute("title","Click to Log In"),E.refs.openModalHomeBtn.classList.add("log-in"))}))})();E.refs.registerForm.addEventListener("submit",(async e=>{e.preventDefault();const t=E.refs.registerEmail.value,a=E.refs.registerPassword.value;try{await(0,l.createUserWithEmailAndPassword)(u.auth,t,a);E.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),c.Notify.success("You have successfully registered and logged in. Have fun!")}catch(e){"Firebase: Password should be at least 6 characters (auth/weak-password)."===e.message&&c.Notify.warning("Password should be at least 6 characters"),"Firebase: Error (auth/email-already-in-use)."===e.message&&c.Notify.warning("An account is already registered with this email"),"Firebase: Error (auth/invalid-email)."===e.message&&c.Notify.warning("Please enter valid email address"),"Firebase: Error (auth/missing-password)."===e.message&&c.Notify.warning("Please enter password")}}));E.refs.loginForm.addEventListener("submit",(async e=>{e.preventDefault();const t=E.refs.loginEmail.value,a=E.refs.loginPassword.value;try{await(0,l.signInWithEmailAndPassword)(u.auth,t,a);E.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),c.Notify.success("You have logged in. Welcome back!")}catch(e){"Firebase: Error (auth/missing-password)."===e.message&&c.Notify.warning("Please enter password"),"Firebase: Error (auth/invalid-email)."===e.message&&c.Notify.warning("Please enter valid email address"),"Firebase: Error (auth/user-not-found)."===e.message&&c.Notify.warning("User not found. Please check if you entered valid email address and password"),"Firebase: Error (auth/wrong-password)."===e.message&&c.Notify.warning("You have entered incorrect password")}}));E.refs.openModalHomeBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&c.Confirm.show("You are about to log out.","Proceed?","Log Out","Stay Logged In",(async()=>{await(0,l.signOut)(u.auth),c.Notify.success("You have been logged out. See you soon")}),(()=>{}),{titleColor:"#b92f2c",fontFamily:"Roboto, sans-serif;",borderRadius:"10px",okButtonBackground:"#b92f2c"})}));const N=()=>{E.refs.loginForm.classList.toggle("login-hidden"),E.refs.registerForm.classList.toggle("register-hidden")};(E=o("5Zbuc")).refs.showLoginBtn.addEventListener("click",N),E.refs.showRegisterBtn.addEventListener("click",N);const k=e=>{e.target.classList.contains("log-in")?E.refs.modal.classList.remove("auth-modal-is-hidden"):e.target.classList.contains("auth-modal-close")&&E.refs.modal.classList.add("auth-modal-is-hidden")};E.refs.openModalHomeBtn.addEventListener("click",k),E.refs.closeModalBtn.addEventListener("click",k),o("hvQmF");var F={},q=/^\s+|\s+$/g,M=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,x=/^0o[0-7]+$/i,P=parseInt,S="object"==typeof e&&e&&e.Object===Object&&e,W="object"==typeof self&&self&&self.Object===Object&&self,O=S||W||Function("return this")(),A=Object.prototype.toString,B=Math.max,C=Math.min,j=function(){return O.Date.now()};function D(e,t,a){var o,r,s,i,n,d,c=0,l=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var a=o,s=r;return o=r=void 0,c=t,i=e.apply(s,a)}function g(e){return c=e,n=setTimeout(v,t),l?m(e):i}function h(e){var a=e-d;return void 0===d||a>=t||a<0||u&&e-c>=s}function v(){var e=j();if(h(e))return y(e);n=setTimeout(v,function(e){var a=t-(e-d);return u?C(a,s-(e-c)):a}(e))}function y(e){return n=void 0,f&&o?m(e):(o=r=void 0,i)}function w(){var e=j(),a=h(e);if(o=arguments,r=this,d=e,a){if(void 0===n)return g(d);if(u)return n=setTimeout(v,t),m(d)}return void 0===n&&(n=setTimeout(v,t)),i}return t=Q(t)||0,H(a)&&(l=!!a.leading,s=(u="maxWait"in a)?B(Q(a.maxWait)||0,t):s,f="trailing"in a?!!a.trailing:f),w.cancel=function(){void 0!==n&&clearTimeout(n),c=0,o=d=r=n=void 0},w.flush=function(){return void 0===n?i:y(j())},w}function H(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Q(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==A.call(e)}(e))return NaN;if(H(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=H(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(q,"");var a=T.test(e);return a||x.test(e)?P(e.slice(2),a?2:8):M.test(e)?NaN:+e}F=function(e,t,a){var o=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return H(a)&&(o="leading"in a?!!a.leading:o,r="trailing"in a?!!a.trailing:r),D(e,t,{leading:o,maxWait:t,trailing:r})},window.addEventListener("scroll",F((function(){const e=document.querySelector(".scroll-to-top");document.body.scrollTop>550||document.documentElement.scrollTop>550?e.style.display="flex":e.style.display="none"}),1e3)),o("ayzP0"),o("fLY7d"),o("37v9V");
//# sourceMappingURL=index.5e8a09be.js.map
