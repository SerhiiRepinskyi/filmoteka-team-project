{"mappings":"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","sources":["src/js/library-window-listeners.js","src/js/render-watched.js","src/js/lib-card-markup.js","src/js/render-queue.js","src/js/library_button.js","src/js/modal-card_library.js","src/js/firebase/firebase-auth-library.js"],"sourcesContent":["import onAuth from './onAuth';\nimport { onThemeBtnClick } from './themse-picker';\nwindow.addEventListener('load', onAuth);\ndocument\n  .querySelector('#theme-toggle')\n  .addEventListener('click', onThemeBtnClick);\n","import { DatabaseAPI } from './firebase/database-api';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport { Report } from 'notiflix';\nimport { refs } from './refs';\nimport { renderMarkup } from './lib-card-markup';\n\nexport const service = new DatabaseAPI();\n\nexport async function renderWatchedList() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  try {\n    const listArr = await service.getWatchedList();\n    const markup = renderMarkup(listArr);\n    refs.libGalleryEl.insertAdjacentHTML('beforeend', markup);\n    Loading.remove();\n    window.removeEventListener('load', renderWatchedList);\n  } catch (error) {\n    console.log(error);\n    Report.info(\n      'Filmoteka Info',\n      'This List is empty. Start adding some movies to see them here',\n      'OK'\n    );\n  }\n}\n","import {\n    getGenresLib,\n    getReleaseDate,\n    getMovieTitle,\n    getMoviePoster,\n  } from './markup-func';\n\nexport function renderMarkup(listArr) {\n    return listArr\n      .map(({ id, title, poster_path, release_date, genres }) => {\n        return `<li class='card-item' data-id='${id}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${getMoviePoster(\n            poster_path\n          )}' width='395' alt='${title}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${getMovieTitle(title)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${getGenresLib(genres)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${getReleaseDate(release_date)}</p>\n        </div>\n        </div>\n        </li>`;\n      })\n      .join('');\n  }","import { renderMarkup } from './lib-card-markup';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport {refs} from './refs';\nimport { service } from './render-watched';\n\nexport async function renderQueueList() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  const listArr = await service.getQueueList();\n  const markup = renderMarkup(listArr);\n  refs.libGalleryEl.insertAdjacentHTML('beforeend', markup);\n  Loading.remove();\n}\n","import { renderWatchedList } from './render-watched';\nimport { renderQueueList } from './render-queue';\nimport {refs} from './refs';\n\nfunction handleButtonClick(event) {\n  const clickedButton = event.target;\n  if (clickedButton === refs.buttonWatchedEl) {\n    refs.libGalleryEl.innerHTML = '';\n    renderWatchedList();\n    if (!refs.buttonWatchedEl.classList.contains('lib--active')) {\n      refs.buttonWatchedEl.classList.add('lib--active');\n      refs.buttonQueueEl.classList.remove('lib--active');\n    }\n  } else if (clickedButton === refs.buttonQueueEl) {\n    refs.libGalleryEl.innerHTML = '';\n    renderQueueList();\n    if (!refs.buttonQueueEl.classList.contains('lib--active')) {\n      refs.buttonWatchedEl.classList.remove('lib--active');\n      refs.buttonQueueEl.classList.add('lib--active');\n    }\n  }\n}\n\nrefs.buttonWatchedEl.addEventListener('click', handleButtonClick);\nrefs.buttonQueueEl.addEventListener('click', handleButtonClick);\nwindow.addEventListener('load', renderWatchedList);\n","import { FilmAPI } from './api';\nimport fetchModalCard from './modal-card_render';\n\nconst modalCardBackdrop = document.querySelector('.modal-card__backdrop');\nconst galeryList = document.querySelector('.library-cards__list');\nconst body = document.querySelector('body');\nconst modalCard = document.querySelector('.modal-card');\n\nconst btnCloseModalEl = document.querySelector('.modal-card__close-btn');\nconst modalCardAPI = new FilmAPI();\ngaleryList.addEventListener('click', getMovieObjOnClick);\n\nasync function getMovieObjOnClick(evt) {\n  if (!evt.target.closest('.card-item')) {\n    return;\n  }\n  let liId = evt.target.closest('.card-item').dataset.id;\n  const movieObj = await modalCardAPI.fetchDetails(liId);\n  fetchModalCard(movieObj);\n  body.classList.add('no-scroll');\n  modalCardBackdrop.classList.remove('hidden');\n}\n\nwindow.addEventListener('keydown', handleEscKeyDown);\n\nfunction handleEscKeyDown(event) {\n  if (event.code === 'Escape') {\n    body.classList.remove('no-scroll');\n    modalCardBackdrop.classList.add('hidden');\n  }\n}\nbtnCloseModalEl.addEventListener('click', evt => {\n  body.classList.remove('no-scroll');\n  modalCardBackdrop.classList.add('hidden');\n});\n\nmodalCardBackdrop.addEventListener('click', e => {\n  if (e.target === modalCardBackdrop) {\n    modalCardBackdrop.classList.add('hidden');\n    body.classList.remove('no-scroll');\n  }\n});\n","import { firebaseApp } from './firebase-init';\nimport { getAuth, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { refs } from './auth-modal-refs';\nimport { Notify } from 'notiflix';\n\nconst auth = getAuth(firebaseApp);\n\nconst monitorAuthState = async () => {\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      refs.openModalLibraryBtn.classList.add('log-out');\n      refs.openModalLibraryBtn.setAttribute('title', 'Click to Log Out');\n      refs.openModalLibraryBtn.classList.remove('log-in');\n    } else {\n      refs.openModalLibraryBtn.classList.remove('log-out');\n      refs.openModalLibraryBtn.setAttribute('title', 'Click to Log In');\n      refs.openModalLibraryBtn.classList.add('log-in');\n    }\n  });\n};\nmonitorAuthState();\n\nconst logout = async e => {\n  if (!e.target.classList.contains('log-out')) {\n    return;\n  }\n  await signOut(auth);\n  Notify.success('You are loged out. See you soon');\n\n  setTimeout(() => window.location.replace('./index.html'), 2000);\n};\n\nrefs.openModalLibraryBtn.addEventListener('click', logout);\n"],"names":["$1beAg","parcelRequire","window","addEventListener","default","document","querySelector","$6p62o","onThemeBtnClick","$bpxeT","$3mSO2","$56c676e850ca829d$export$add40575555c273c","listArr","map","param","id","title","poster_path","release_date","genres","concat","getMoviePoster","getMovieTitle","getGenresLib","getReleaseDate","join","$d887eeac15aee035$export$6ed414b8d8bead88","$k30FB","DatabaseAPI","$d887eeac15aee035$export$8243be6ab7611de2","$d887eeac15aee035$var$_renderWatchedList","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","markup","$7rQOT","Loading","pulse","svgColor","getWatchedList","_ctx","sent","$4Nugj","refs","libGalleryEl","insertAdjacentHTML","remove","removeEventListener","console","log","t0","$6JpON","Report","info","$f3e5ebb6bb433a3d$export$69bf332fc394edc5","$f3e5ebb6bb433a3d$var$_renderQueueList","getQueueList","$5f231e217f3687e3$var$handleButtonClick","event","clickedButton","target","buttonWatchedEl","innerHTML","classList","contains","add","buttonQueueEl","$d7eea1e5c1a66419$var$modalCardBackdrop","$d7eea1e5c1a66419$var$galeryList","$d7eea1e5c1a66419$var$body","$d7eea1e5c1a66419$var$btnCloseModalEl","$d7eea1e5c1a66419$var$modalCardAPI","$b7ONl","FilmAPI","$d7eea1e5c1a66419$var$_getMovieObjOnClick","evt","liId","movieObj","closest","dataset","fetchDetails","$iNDEe","code","e","$53555ed19cee43ff$var$auth","$gQOBw","getAuth","$fGC9r","firebaseApp","$53555ed19cee43ff$var$monitorAuthState","onAuthStateChanged","user","$k4iT1","openModalLibraryBtn","setAttribute","$53555ed19cee43ff$var$logout","signOut","Notify","success","setTimeout","location","replace"],"version":3,"file":"library.7603357d.js.map"}