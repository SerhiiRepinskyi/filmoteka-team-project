{"mappings":"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","sources":["src/js/library-window-listeners.js","src/js/render-watched.js","src/js/lib-card-markup.js","src/js/render-queue.js","src/js/library_button.js","src/js/modal-card_library.js","src/js/modal-buttons-library.js","src/js/firebase/firebase-auth-library.js"],"sourcesContent":["import onAuth from './onAuth';\nimport { onThemeBtnClick } from './themse-picker';\nwindow.addEventListener('load', onAuth);\ndocument\n  .querySelector('#theme-toggle')\n  .addEventListener('click', onThemeBtnClick);\n","import { DatabaseAPI } from './firebase/database-api';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport { Report } from 'notiflix';\nimport { refs } from './refs';\nimport { renderMarkup, renderLibPlug } from './lib-card-markup';\n\nexport const service = new DatabaseAPI();\n\nexport async function renderWatchedList() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  refs.libGalleryEl.innerHTML = '';\n  refs.plugWrapperLight.classList.add('hidden');\n  try {\n    const listArr = await service.getWatchedList();\n    if (listArr.length !== 0) {\n      const markup = renderMarkup(listArr);\n      refs.libGalleryEl.insertAdjacentHTML('beforeend', markup);\n    } else {\n      renderLibPlug();\n    }\n    window.removeEventListener('load', renderWatchedList);\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n  Loading.remove();\n}\n\nexport async function renderWatchedListOnModalClose() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  refs.libGalleryEl.innerHTML = '';\n  refs.plugWrapperLight.classList.add('hidden');\n  try {\n    const listArr = await service.getWatchedList();\n    if (listArr.length !== 0) {\n      const markup = renderMarkup(listArr);\n      refs.libGalleryEl.innerHTML = markup;\n    } else {\n      renderLibPlug();\n    }\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n\n  Loading.remove();\n}\n","import {\n  getGenresLib,\n  getReleaseDate,\n  getMovieTitle,\n  getMoviePoster,\n} from './markup-func';\nimport { storageKey } from './themse-picker';\nimport { refs } from './refs';\n\nexport function renderMarkup(listArr) {\n  return listArr\n    .map(({ id, title, poster_path, release_date, genres }) => {\n      return `<li class='card-item' data-id='${id}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${getMoviePoster(\n            poster_path\n          )}' width='395' alt='${title}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${getMovieTitle(title)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${getGenresLib(genres)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${getReleaseDate(release_date)}</p>\n        </div>\n        </div>\n        </li>`;\n    })\n    .join('');\n}\n\nexport function renderLibPlug() {\n    refs.plugWrapperLight.classList.remove('hidden');\n}\n","import { renderMarkup, renderLibPlug } from './lib-card-markup';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport { refs } from './refs';\nimport { service } from './render-watched';\nimport { Report } from 'notiflix';\n\nexport async function renderQueueList() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  refs.libGalleryEl.innerHTML = '';\n  refs.plugWrapperLight.classList.add('hidden');\n  try {\n    const listArr = await service.getQueueList();\n    if (listArr.length !== 0) {\n      const markup = renderMarkup(listArr);\n      refs.libGalleryEl.insertAdjacentHTML('beforeend', markup);\n    } else {\n      renderLibPlug();\n    }\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n  Loading.remove();\n}\n\nexport async function renderQueueListOnModalClose() {\n  Loading.pulse({\n    svgColor: '#b92f2c',\n  });\n  refs.libGalleryEl.innerHTML = '';\n  refs.plugWrapperLight.classList.add('hidden');\n\n  try {\n    const listArr = await service.getQueueList();\n    if (listArr.length !== 0) {\n      const markup = renderMarkup(listArr);\n      refs.libGalleryEl.innerHTML = markup;\n    } else {\n      renderLibPlug();\n    }\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n\n  Loading.remove();\n}\n","import { renderWatchedList } from './render-watched';\nimport { renderQueueList } from './render-queue';\nimport {refs} from './refs';\n\nfunction handleButtonClick(event) {\n  const clickedButton = event.target;\n  if (clickedButton === refs.buttonWatchedEl) {\n    refs.libGalleryEl.innerHTML = '';\n    renderWatchedList();\n    if (!refs.buttonWatchedEl.classList.contains('lib--active')) {\n      refs.buttonWatchedEl.classList.add('lib--active');\n      refs.buttonQueueEl.classList.remove('lib--active');\n    }\n  } else if (clickedButton === refs.buttonQueueEl) {\n    refs.libGalleryEl.innerHTML = '';\n    renderQueueList();\n    if (!refs.buttonQueueEl.classList.contains('lib--active')) {\n      refs.buttonWatchedEl.classList.remove('lib--active');\n      refs.buttonQueueEl.classList.add('lib--active');\n    }\n  }\n}\n\nrefs.buttonWatchedEl.addEventListener('click', handleButtonClick);\nrefs.buttonQueueEl.addEventListener('click', handleButtonClick);\nwindow.addEventListener('load', renderWatchedList);\n","import { FilmAPI } from './api';\nimport fetchModalCard from './modal-card_render';\nimport { renderWatchedListOnModalClose } from './render-watched';\nimport { renderQueueListOnModalClose } from './render-queue';\n\nconst modalCardBackdrop = document.querySelector('.modal-card__backdrop');\nconst galeryList = document.querySelector('.library-cards__list');\nconst body = document.querySelector('body');\nconst modalCard = document.querySelector('.modal-card');\n\nconst btnCloseModalEl = document.querySelector('.modal-card__close-btn');\nconst modalCardAPI = new FilmAPI();\ngaleryList.addEventListener('click', getMovieObjOnClick);\n\nasync function getMovieObjOnClick(evt) {\n  \n  modalCardAPI.youTubeID = evt.target.closest('.card-item').dataset.id;\n  localStorage.setItem(\n    'LOCALSTORAGE_KEY',\n    `${evt.target.closest('.card-item').dataset.id}`\n  );\n  if (!evt.target.closest('.card-item')) {\n    return;\n  }\n  let liId = evt.target.closest('.card-item').dataset.id;\n  const movieObj = await modalCardAPI.fetchDetails(liId);\n  fetchModalCard(movieObj);\n  body.classList.add('no-scroll');\n  modalCardBackdrop.classList.remove('hidden');\n}\n\nwindow.addEventListener('keydown', handleEscKeyDown);\n\nfunction handleEscKeyDown(event) {\n  if (event.code === 'Escape') {\n    body.classList.remove('no-scroll');\n    modalCardBackdrop.classList.add('hidden');\n    renderLibraryOnCloseModal();\n  }\n}\nbtnCloseModalEl.addEventListener('click', evt => {\n  body.classList.remove('no-scroll');\n  modalCardBackdrop.classList.add('hidden');\n  renderLibraryOnCloseModal();\n});\n\nmodalCardBackdrop.addEventListener('click', e => {\n  if (e.target === modalCardBackdrop) {\n    modalCardBackdrop.classList.add('hidden');\n    body.classList.remove('no-scroll');\n    renderLibraryOnCloseModal();\n  }\n});\n\nfunction renderLibraryOnCloseModal() {\n  if (\n    document.querySelector('.lib-watched').classList.contains('lib--active')\n  ) {\n    renderWatchedListOnModalClose();\n  } else {\n    renderQueueListOnModalClose();\n  }\n}\n","import { DatabaseAPI } from './firebase/database-api';\nimport { FilmAPI } from './api';\nimport { Notify } from 'notiflix';\n\nconst filmAPI = new FilmAPI();\nconst databaseAPI = new DatabaseAPI();\n\nconst galeryList = document.querySelector('.library-cards__list');\nconst modalCard = document.querySelector('.modal-card');\nlet movieId = '';\n\nconst switchWatchedBtnToRemove = () => {\n  setTimeout(() => {\n    const watchedBtn = document.querySelector('[data-card-modal-watched-film]');\n    watchedBtn.classList.remove('add-to-watched');\n    watchedBtn.classList.add('remove-from-watched');\n    watchedBtn.textContent = 'Remove from watched';\n  }, 200);\n};\n\nconst switchQueueButtonToRemove = () => {\n  setTimeout(() => {\n    const queueBtn = document.querySelector('[data-card-modal-queue-film]');\n    queueBtn.classList.remove('add-to-queue');\n    queueBtn.classList.add('remove-from-queue');\n    queueBtn.textContent = 'Remove from queue';\n  }, 200);\n};\n\nconst switchWatchedBtnToAdd = () => {\n  setTimeout(() => {\n    const watchedBtn = document.querySelector('[data-card-modal-watched-film]');\n    watchedBtn.classList.remove('remove-from-watched');\n    watchedBtn.classList.add('add-to-watched');\n    watchedBtn.textContent = 'Add to watched';\n  }, 200);\n};\n\nconst switchQueueButtonToAdd = () => {\n  setTimeout(() => {\n    const queueBtn = document.querySelector('[data-card-modal-queue-film]');\n    queueBtn.classList.remove('remove-from-queue');\n    queueBtn.classList.add('add-to-queue');\n    queueBtn.textContent = 'Add to queue';\n  }, 200);\n};\n\nexport const checkList = async e => {\n  if (!e.target.closest('.card-item')) {\n    return;\n  }\n\n  try {\n    movieId = Number(e.target.closest('.card-item').dataset.id);\n    const presentInWatched = await databaseAPI.checkPresenseInWatched(movieId);\n    if (presentInWatched) {\n      switchWatchedBtnToRemove();\n    } else if (!presentInWatched) {\n      switchWatchedBtnToAdd();\n    }\n    const presentInQueue = await databaseAPI.checkPresenseInQueue(movieId);\n    if (presentInQueue) {\n      switchQueueButtonToRemove();\n    } else if (!presentInQueue) {\n      switchQueueButtonToAdd();\n    }\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n};\n\nexport const addMovies = async e => {\n  if ('cardModalWatchedFilm' in e.target.dataset) {\n    try {\n      if (e.target.classList.contains('add-to-watched')) {\n        const movieObj = await filmAPI.fetchDetails(movieId);\n        await databaseAPI.addToWatched(movieObj);\n        Notify.success(`${movieObj.title} added to Watched List`);\n        switchWatchedBtnToRemove();\n        const presentInQueue = await databaseAPI.checkPresenseInQueue(movieId);\n        if (presentInQueue) {\n          switchQueueButtonToAdd();\n          await databaseAPI.removeMovieFromQueue(movieId);\n          Notify.success(`${movieObj.title} removed from Queue List`);\n        }\n      }\n    } catch (error) {\n      Notify.failure('Ooops! Something went wrong. Try reloading page');\n    }\n  } else if ('cardModalQueueFilm' in e.target.dataset) {\n    try {\n      if (e.target.classList.contains('add-to-queue')) {\n        const movieObj = await filmAPI.fetchDetails(movieId);\n        await databaseAPI.addToQueue(movieObj);\n        Notify.success(`${movieObj.title} added to Queue List`);\n        switchQueueButtonToRemove();\n        const presentInWatched = await databaseAPI.checkPresenseInWatched(\n          movieId\n        );\n        if (presentInWatched) {\n          switchWatchedBtnToAdd();\n          await databaseAPI.removeMovieFromWatched(movieId);\n          Notify.success(`${movieObj.title} removed from Watched List`);\n        }\n      }\n    } catch (error) {\n      Notify.failure('Ooops! Something went wrong. Try reloading page');\n    }\n  }\n};\n\nexport const removeMovies = async e => {\n  try {\n    if ('cardModalWatchedFilm' in e.target.dataset) {\n      if (e.target.classList.contains('remove-from-watched')) {\n        await databaseAPI.removeMovieFromWatched(movieId);\n        Notify.success(`Movie removed from Watched List`);\n\n        switchWatchedBtnToAdd();\n      }\n    } else if ('cardModalQueueFilm' in e.target.dataset) {\n      if (e.target.classList.contains('remove-from-queue')) {\n        await databaseAPI.removeMovieFromQueue(movieId);\n        Notify.success(`Movie removed from Queue List`);\n\n        switchQueueButtonToAdd();\n      }\n    }\n  } catch (error) {\n    Notify.failure('Ooops! Something went wrong. Try reloading page');\n  }\n};\n\ngaleryList.addEventListener('click', checkList);\nmodalCard.addEventListener('click', addMovies);\nmodalCard.addEventListener('click', removeMovies);\n","import { firebaseApp } from './firebase-init';\nimport { getAuth, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { refs } from './auth-modal-refs';\nimport { Notify, Confirm } from 'notiflix';\n\nconst auth = getAuth(firebaseApp);\n\nconst monitorAuthState = async () => {\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      refs.openModalLibraryBtn.classList.add('log-out');\n      refs.openModalLibraryBtn.setAttribute('title', 'Click to Log Out');\n      refs.openModalLibraryBtn.classList.remove('log-in');\n    } else {\n      refs.openModalLibraryBtn.classList.remove('log-out');\n      refs.openModalLibraryBtn.setAttribute('title', 'Click to Log In');\n      refs.openModalLibraryBtn.classList.add('log-in');\n    }\n  });\n};\nmonitorAuthState();\n\nconst logout = async e => {\n  if (!e.target.classList.contains('log-out')) {\n    return;\n  }\n  Confirm.show(\n    'You are about to log out.',\n    'Proceed?',\n    'Log Out',\n    'Stay Logged In',\n    async () => {\n      await signOut(auth);\n      Notify.success(\n        'You have been logged out. See you soon. Redirecting to frontpage'\n      );\n      setTimeout(() => window.location.replace('./index.html'), 2000);\n    },\n    () => {\n      return;\n    },\n    {\n      titleColor: '#b92f2c',\n      fontFamily: 'Roboto, sans-serif;',\n      borderRadius: '10px',\n      okButtonBackground: '#b92f2c',\n    }\n  );\n};\n\nrefs.openModalLibraryBtn.addEventListener('click', logout);\n"],"names":["$1beAg","parcelRequire","window","addEventListener","default","document","querySelector","$6p62o","onThemeBtnClick","$bpxeT","$3mSO2","$56c676e850ca829d$export$add40575555c273c","listArr","map","param","id","title","poster_path","release_date","genres","concat","getMoviePoster","getMovieTitle","getGenresLib","getReleaseDate","join","$56c676e850ca829d$export$e06bc9a23660112d","$4Nugj","refs","plugWrapperLight","classList","remove","$d887eeac15aee035$export$6ed414b8d8bead88","$k30FB","DatabaseAPI","$d887eeac15aee035$export$8243be6ab7611de2","$d887eeac15aee035$var$_renderWatchedList","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","markup","$7rQOT","Loading","pulse","svgColor","libGalleryEl","innerHTML","add","getWatchedList","_ctx","sent","length","insertAdjacentHTML","removeEventListener","Notify","failure","$d887eeac15aee035$export$be04b9abd42a0d96","$d887eeac15aee035$var$_renderWatchedListOnModalClose","$f3e5ebb6bb433a3d$export$69bf332fc394edc5","$f3e5ebb6bb433a3d$var$_renderQueueList","getQueueList","$f3e5ebb6bb433a3d$export$1623855110ae03ed","$f3e5ebb6bb433a3d$var$_renderQueueListOnModalClose","$5f231e217f3687e3$var$handleButtonClick","event","clickedButton","target","buttonWatchedEl","contains","buttonQueueEl","$d7eea1e5c1a66419$var$modalCardBackdrop","$d7eea1e5c1a66419$var$galeryList","$d7eea1e5c1a66419$var$body","$d7eea1e5c1a66419$var$btnCloseModalEl","$d7eea1e5c1a66419$var$modalCardAPI","$b7ONl","FilmAPI","$d7eea1e5c1a66419$var$_getMovieObjOnClick","evt","liId","movieObj","youTubeID","closest","dataset","localStorage","setItem","fetchDetails","$iNDEe","$d7eea1e5c1a66419$var$renderLibraryOnCloseModal","code","e","$3a235dc3812267ee$var$filmAPI","$3a235dc3812267ee$var$databaseAPI","$3a235dc3812267ee$var$galeryList","$3a235dc3812267ee$var$modalCard","$3a235dc3812267ee$var$movieId","$3a235dc3812267ee$var$switchWatchedBtnToRemove","setTimeout","watchedBtn","textContent","$3a235dc3812267ee$var$switchQueueButtonToRemove","queueBtn","$3a235dc3812267ee$var$switchWatchedBtnToAdd","$3a235dc3812267ee$var$switchQueueButtonToAdd","$3a235dc3812267ee$export$89c8f3ec304e8dd7","presentInWatched","presentInQueue","Number","checkPresenseInWatched","checkPresenseInQueue","$6JpON","$3a235dc3812267ee$export$4c424dd547d4a9d5","movieObj1","addToWatched","success","removeMovieFromQueue","addToQueue","removeMovieFromWatched","$3a235dc3812267ee$export$a1fc98f383adfb9f","$53555ed19cee43ff$var$auth","$gQOBw","getAuth","$fGC9r","firebaseApp","$53555ed19cee43ff$var$monitorAuthState","onAuthStateChanged","user","$k4iT1","openModalLibraryBtn","setAttribute","$53555ed19cee43ff$var$logout","_callee1","Confirm","show","signOut","location","replace","titleColor","fontFamily","borderRadius","okButtonBackground"],"version":3,"file":"library.ee7693f3.js.map"}