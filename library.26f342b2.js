var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},s=e.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in a){var s=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=s),s("krGWQ"),s("7rYDH"),s("8j3eh");var o=s("8j3eh"),i=s("ayzP0");window.addEventListener("load",o.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var r=s("4O2bx"),n=s("dSs1Y");s("7Y9D8");var c=s("krGWQ"),d=s("eVEnd");s("ayzP0");c=s("krGWQ");function l(e){return e.map((({id:e,title:t,poster_path:a,release_date:s,genres:o})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,d.getMoviePoster)(a)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,d.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,d.getGenresLib)(o)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,d.getReleaseDate)(s)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}function u(){c.refs.plugWrapperLight.classList.remove("hidden")}const f=new(0,r.DatabaseAPI);async function m(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getWatchedList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.insertAdjacentHTML("beforeend",t)}else u();window.removeEventListener("load",m)}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}async function g(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getWatchedList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.innerHTML=t}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}n=s("dSs1Y"),c=s("krGWQ");async function L(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getQueueList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.insertAdjacentHTML("beforeend",t)}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}async function y(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getQueueList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.innerHTML=t}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}function h(e){const t=e.target;t===c.refs.buttonWatchedEl?(c.refs.libGalleryEl.innerHTML="",m(),c.refs.buttonWatchedEl.classList.contains("lib--active")||(c.refs.buttonWatchedEl.classList.add("lib--active"),c.refs.buttonQueueEl.classList.remove("lib--active"))):t===c.refs.buttonQueueEl&&(c.refs.libGalleryEl.innerHTML="",L(),c.refs.buttonQueueEl.classList.contains("lib--active")||(c.refs.buttonWatchedEl.classList.remove("lib--active"),c.refs.buttonQueueEl.classList.add("lib--active")))}s("7Y9D8"),(c=s("krGWQ")).refs.buttonWatchedEl.addEventListener("click",h),c.refs.buttonQueueEl.addEventListener("click",h),window.addEventListener("load",m),s("9AkgD"),s("hPewW"),s("bQoWw");var v=s("7rYDH"),p=s("bQoWw");const w=document.querySelector(".modal-card__backdrop"),b=document.querySelector(".library-cards__list"),E=document.querySelector("body"),T=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),M=new(0,v.FilmAPI);function W(){document.querySelector(".lib-watched").classList.contains("lib--active")?g():y()}b.addEventListener("click",(async function(e){if(console.log(e.target.closest(".cart-items")),M.youTubeID=e.target.closest(".card-item").dataset.id,localStorage.setItem("LOCALSTORAGE_KEY",`${e.target.closest(".card-item").dataset.id}`),!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const a=await M.fetchDetails(t);(0,p.default)(a),E.classList.add("no-scroll"),w.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(E.classList.remove("no-scroll"),w.classList.add("hidden"),W())})),T.addEventListener("click",(e=>{E.classList.remove("no-scroll"),w.classList.add("hidden"),W()})),w.addEventListener("click",(e=>{e.target===w&&(w.classList.add("hidden"),E.classList.remove("no-scroll"),W())}));r=s("4O2bx"),v=s("7rYDH");var _=s("7Y9D8");const S=new(0,v.FilmAPI),q=new(0,r.DatabaseAPI),k=document.querySelector(".library-cards__list"),Q=document.querySelector(".modal-card");let N="";const O=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"}),150)},D=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"}),150)},G=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"}),150)},A=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"}),150)};k.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{N=Number(e.target.closest(".card-item").dataset.id);const t=await q.checkPresenseInWatched(N);t?O():t||G();const a=await q.checkPresenseInQueue(N);a?D():a||A()}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),Q.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await S.fetchDetails(N);await q.addToWatched(e),_.Notify.success(`${e.title} added to Watched List`),O();await q.checkPresenseInQueue(N)&&(A(),await q.removeMovieFromQueue(N),_.Notify.success(`${e.title} removed from Queue List`))}}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await S.fetchDetails(N);await q.addToQueue(e),_.Notify.success(`${e.title} added to Queue List`),D();await q.checkPresenseInWatched(N)&&(G(),await q.removeMovieFromWatched(N),_.Notify.success(`${e.title} removed from Watched List`))}}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),Q.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await q.removeMovieFromWatched(N),_.Notify.success("Movie removed from Watched List"),G()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await q.removeMovieFromQueue(N),_.Notify.success("Movie removed from Queue List"),A())}catch(e){console.log(e),_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),s("gLIqC"),s("fobnT");var C=s("bcNH0"),H=s("eyjy7"),x=s("5Zbuc");_=s("7Y9D8");const P=(0,H.getAuth)(C.firebaseApp);(async()=>{(0,H.onAuthStateChanged)(P,(e=>{e?(x.refs.openModalLibraryBtn.classList.add("log-out"),x.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),x.refs.openModalLibraryBtn.classList.remove("log-in")):(x.refs.openModalLibraryBtn.classList.remove("log-out"),x.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),x.refs.openModalLibraryBtn.classList.add("log-in"))}))})();x.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,H.signOut)(P),_.Notify.success("You are loged out. See you soon"),setTimeout((()=>window.location.replace("./index.html")),2e3))})),s("4O2bx"),s("hvQmF"),s("ayzP0"),s("fLY7d"),s("37v9V");
//# sourceMappingURL=library.26f342b2.js.map
