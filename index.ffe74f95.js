var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=o),o("krGWQ"),o("7rYDH"),o("8j3eh");var r=o("kcvyG"),i=o("8j3eh"),s=o("ayzP0");window.addEventListener("load",r.default),window.addEventListener("load",i.default),document.querySelector("#theme-toggle").addEventListener("click",s.onThemeBtnClick),o("9AkgD"),o("hPewW"),o("kcvyG"),o("gLIqC"),o("fobnT");var n=o("7rYDH");n=o("7rYDH");const d=document.querySelector(".modal-card__render");new(0,n.FilmAPI);async function c(e){const{backdrop_path:t,poster_path:a,original_title:o,overview:r,vote_average:i,vote_count:s,title:n,genres:c,popularity:l}=e,u=`<div class="modal-card__img-wrapper"><img\n  class="modal-card__img"\n  src="https://image.tmdb.org/t/p/w500${a}"\n  alt="film-poster"\n  width="240"\n/> </div>\n<div class="modal-card__information-wrapper"><p class="modal-card__title">${n}</p>\n<ul class="modal-card__film-information-list">\n<div class="modal-card__film-information-items-wrrapper">\n  <li class="modal-card__film-information__items ">Vote / Votes</li>\n  <p class="modal-card__film-information__text"><span class="modal-card__vote--gray">${s}</span>/<span class="modal-card__vote--red">${i}</span></p>\n</div>\n<div class="modal-card__film-information-items-wrrapper">\n<li class="modal-card__film-information__items">\n  Popularity\n</li>\n<p class="modal-card__film-information__text">${l}</p></div>\n<div class="modal-card__film-information-items-wrrapper">\n  <li class="modal-card__film-information__items" >Original Title\n</li>\n<p class="modal-card__film-information__text">${o}</p></div>\n<div class="modal-card__film-information-items-wrrapper">\n<li class="modal-card__film-information__items">\n  Genre\n</li>\n<p class="modal-card__film-information__text">${c.map((e=>e.name))}</p></div>\n</ul>\n<p class="modal-card__subtitle">About</p>\n<p class="modal-card__text">${r}\n</p><div class="modal-card__btn-wrapper">\n<button\nclass="modal-card__watched-btn add-to-watched"\ntype="button"\ndata-card-modal-watched-film\n>\nadd to Watched\n</button>\n<button\nclass="modal-card__queue-btn add-to-queue"\ntype="button"\ndata-card-modal-queue-film\n>\nadd to queue\n</button></div>\n</div>`;return d.innerHTML=u}const l=document.querySelector(".modal-card__backdrop"),u=document.querySelector(".cards__list"),m=document.querySelector("body"),f=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),g=new(0,n.FilmAPI);u.addEventListener("click",(async function(e){if(!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;c(await g.fetchDetails(t)),m.classList.add("no-scroll"),l.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(m.classList.remove("no-scroll"),l.classList.add("hidden"))})),f.addEventListener("click",(e=>{m.classList.remove("no-scroll"),l.classList.add("hidden")})),l.addEventListener("click",(e=>{e.target===l&&(l.classList.add("hidden"),m.classList.remove("no-scroll"))}));var v=o("4O2bx"),p=(n=o("7rYDH"),o("7Y9D8")),h=o("eyjy7"),y=o("bcNH0");const w=new(0,n.FilmAPI),_=new(0,v.DatabaseAPI),b=document.querySelector(".cards__list"),L=document.querySelector(".modal-card");let E="";const q=async()=>{const e=document.querySelector("[data-card-modal-watched-film]"),t=document.querySelector("[data-card-modal-queue-film]");(0,h.onAuthStateChanged)(y.auth,(a=>{a?(e.removeAttribute("disabled"),t.removeAttribute("disabled")):(e.setAttribute("disabled",""),t.setAttribute("disabled",""),p.Block.dots(".modal-card__btn-wrapper","Log in to add movies to library",{svgSize:"70px",svgColor:"#66000000",backgroundColor:"rgba(255,255,255,0.5)"}))}))},k=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"},N=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"},F=()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"},S=()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"};b.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{setTimeout(q,200),E=Number(e.target.closest(".card-item").dataset.id);const t=await _.checkPresenseInWatched(E);t?k():t||F();const a=await _.checkPresenseInQueue(E);a?N():a||S()}catch(e){p.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),L.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await w.fetchDetails(E);await _.addToWatched(e),p.Notify.success(`${e.title} added to Watched List`),k();await _.checkPresenseInQueue(E)&&(S(),await _.removeMovieFromQueue(E),p.Notify.success(`${e.title} removed from Queue List`))}}catch(e){p.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await w.fetchDetails(E);await _.addToQueue(e),p.Notify.success(`${e.title} added to Queue List`),N();await _.checkPresenseInWatched(E)&&(F(),await _.removeMovieFromWatched(E),p.Notify.success(`${e.title} removed from Watched List`))}}catch(e){p.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),L.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await _.removeMovieFromWatched(E),p.Notify.success("Movie removed from Watched List"),F()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await _.removeMovieFromQueue(E),p.Notify.success("Movie removed from Queue List"),S())}catch(e){p.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),o("2nhTy");y=o("bcNH0"),h=o("eyjy7");var x=o("5Zbuc");p=o("7Y9D8");(async()=>{(0,h.onAuthStateChanged)(y.auth,(e=>{e?(x.refs.openModalHomeBtn.classList.add("log-out"),x.refs.openModalHomeBtn.setAttribute("title","Click to Log Out"),x.refs.openModalHomeBtn.classList.remove("log-in")):(x.refs.openModalHomeBtn.classList.remove("log-out"),x.refs.openModalHomeBtn.setAttribute("title","Click to Log In"),x.refs.openModalHomeBtn.classList.add("log-in"))}))})();x.refs.registerForm.addEventListener("submit",(async e=>{e.preventDefault();const t=x.refs.registerEmail.value,a=x.refs.registerPassword.value;try{await(0,h.createUserWithEmailAndPassword)(y.auth,t,a);x.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),p.Notify.success("You are registered. Have fun!")}catch(e){"Firebase: Password should be at least 6 characters (auth/weak-password)."===e.message&&p.Notify.warning("Password should be at least 6 characters"),"Firebase: Error (auth/email-already-in-use)."===e.message&&p.Notify.warning("User with this email is already registered"),"Firebase: Error (auth/invalid-email)."===e.message&&p.Notify.warning("Please enter right email"),"Firebase: Error (auth/missing-password)."===e.message&&p.Notify.warning("Please enter password")}}));x.refs.loginForm.addEventListener("submit",(async e=>{e.preventDefault();const t=x.refs.loginEmail.value,a=x.refs.loginPassword.value;try{await(0,h.signInWithEmailAndPassword)(y.auth,t,a);x.refs.modal.classList.toggle("auth-modal-is-hidden"),e.target.reset(),p.Notify.success("You are loged in. Welcome back!")}catch(e){"Firebase: Error (auth/missing-password)."===e.message&&p.Notify.warning("Please enter password"),"Firebase: Error (auth/invalid-email)."===e.message&&p.Notify.warning("Please enter right email"),"Firebase: Error (auth/user-not-found)."===e.message&&p.Notify.warning("User not found. Please check if you entered right email and password"),"Firebase: Error (auth/wrong-password)."===e.message&&p.Notify.warning("You entered wrong password")}}));x.refs.openModalHomeBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,h.signOut)(y.auth),p.Notify.success("You are loged out. See you soon"))}));const T=()=>{x.refs.loginForm.classList.toggle("login-hidden"),x.refs.registerForm.classList.toggle("register-hidden")};(x=o("5Zbuc")).refs.showLoginBtn.addEventListener("click",T),x.refs.showRegisterBtn.addEventListener("click",T);const M=e=>{e.target.classList.contains("log-in")?x.refs.modal.classList.remove("auth-modal-is-hidden"):e.target.classList.contains("auth-modal-close")&&x.refs.modal.classList.add("auth-modal-is-hidden")};x.refs.openModalHomeBtn.addEventListener("click",M),x.refs.closeModalBtn.addEventListener("click",M),o("hvQmF");var P={},W=/^\s+|\s+$/g,A=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,D=/^0o[0-7]+$/i,H=parseInt,$="object"==typeof e&&e&&e.Object===Object&&e,j="object"==typeof self&&self&&self.Object===Object&&self,B=$||j||Function("return this")(),C=Object.prototype.toString,I=Math.max,Q=Math.min,Y=function(){return B.Date.now()};function R(e,t,a){var o,r,i,s,n,d,c=0,l=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var a=o,i=r;return o=r=void 0,c=t,s=e.apply(i,a)}function g(e){return c=e,n=setTimeout(p,t),l?f(e):s}function v(e){var a=e-d;return void 0===d||a>=t||a<0||u&&e-c>=i}function p(){var e=Y();if(v(e))return h(e);n=setTimeout(p,function(e){var a=t-(e-d);return u?Q(a,i-(e-c)):a}(e))}function h(e){return n=void 0,m&&o?f(e):(o=r=void 0,s)}function y(){var e=Y(),a=v(e);if(o=arguments,r=this,d=e,a){if(void 0===n)return g(d);if(u)return n=setTimeout(p,t),f(d)}return void 0===n&&(n=setTimeout(p,t)),s}return t=G(t)||0,U(a)&&(l=!!a.leading,i=(u="maxWait"in a)?I(G(a.maxWait)||0,t):i,m="trailing"in a?!!a.trailing:m),y.cancel=function(){void 0!==n&&clearTimeout(n),c=0,o=d=r=n=void 0},y.flush=function(){return void 0===n?s:h(Y())},y}function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function G(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==C.call(e)}(e))return NaN;if(U(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=U(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(W,"");var a=O.test(e);return a||D.test(e)?H(e.slice(2),a?2:8):A.test(e)?NaN:+e}P=function(e,t,a){var o=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return U(a)&&(o="leading"in a?!!a.leading:o,r="trailing"in a?!!a.trailing:r),R(e,t,{leading:o,maxWait:t,trailing:r})},window.addEventListener("scroll",P((function(){console.log("scroll scroll");const e=document.querySelector(".scroll-to-top");document.body.scrollTop>550||document.documentElement.scrollTop>550?e.style.display="flex":e.style.display="none"}),1e3)),o("ayzP0");
//# sourceMappingURL=index.ffe74f95.js.map
