var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=o),o("krGWQ"),o("7rYDH"),o("8j3eh");var s=o("8j3eh"),i=o("ayzP0");window.addEventListener("load",s.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var r=o("4O2bx"),c=o("dSs1Y"),d=o("7Y9D8"),n=o("krGWQ"),l=o("eVEnd");function u(e){return e.map((({id:e,title:t,poster_path:a,release_date:o,genres:s})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,l.getMoviePoster)(a)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,l.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,l.getGenresLib)(s)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,l.getReleaseDate)(o)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}const m=new(0,r.DatabaseAPI);async function f(){c.Loading.pulse({svgColor:"#b92f2c"});try{const e=u(await m.getWatchedList());n.refs.libGalleryEl.insertAdjacentHTML("beforeend",e),window.removeEventListener("load",f)}catch(e){d.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}c.Loading.remove()}c=o("dSs1Y"),n=o("krGWQ"),d=o("7Y9D8");async function v(){c.Loading.pulse({svgColor:"#b92f2c"});try{const e=u(await m.getQueueList());n.refs.libGalleryEl.insertAdjacentHTML("beforeend",e)}catch(e){d.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}c.Loading.remove()}function L(e){const t=e.target;t===n.refs.buttonWatchedEl?(n.refs.libGalleryEl.innerHTML="",f(),n.refs.buttonWatchedEl.classList.contains("lib--active")||(n.refs.buttonWatchedEl.classList.add("lib--active"),n.refs.buttonQueueEl.classList.remove("lib--active"))):t===n.refs.buttonQueueEl&&(n.refs.libGalleryEl.innerHTML="",v(),n.refs.buttonQueueEl.classList.contains("lib--active")||(n.refs.buttonWatchedEl.classList.remove("lib--active"),n.refs.buttonQueueEl.classList.add("lib--active")))}(n=o("krGWQ")).refs.buttonWatchedEl.addEventListener("click",L),n.refs.buttonQueueEl.addEventListener("click",L),window.addEventListener("load",f),o("9AkgD"),o("hPewW"),o("bQoWw");var g=o("7rYDH"),y=o("bQoWw");const h=document.querySelector(".modal-card__backdrop"),w=document.querySelector(".library-cards__list"),b=document.querySelector("body"),p=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),E=new(0,g.FilmAPI);w.addEventListener("click",(async function(e){if(console.log(e.target.closest(".cart-items")),E.youTubeID=e.target.closest(".card-item").dataset.id,localStorage.setItem("LOCALSTORAGE_KEY",`${e.target.closest(".card-item").dataset.id}`),!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const a=await E.fetchDetails(t);(0,y.default)(a),b.classList.add("no-scroll"),h.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(b.classList.remove("no-scroll"),h.classList.add("hidden"))})),p.addEventListener("click",(e=>{b.classList.remove("no-scroll"),h.classList.add("hidden")})),h.addEventListener("click",(e=>{e.target===h&&(h.classList.add("hidden"),b.classList.remove("no-scroll"))}));r=o("4O2bx"),g=o("7rYDH"),d=o("7Y9D8");const _=new(0,g.FilmAPI),k=new(0,r.DatabaseAPI),q=document.querySelector(".library-cards__list"),T=document.querySelector(".modal-card");let M="";const S=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"}),150)},Q=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"}),150)},W=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"}),150)},D=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"}),150)};q.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{M=Number(e.target.closest(".card-item").dataset.id);const t=await k.checkPresenseInWatched(M);t?S():t||W();const a=await k.checkPresenseInQueue(M);a?Q():a||D()}catch(e){d.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),T.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await _.fetchDetails(M);await k.addToWatched(e),d.Notify.success(`${e.title} added to Watched List`),S();await k.checkPresenseInQueue(M)&&(D(),await k.removeMovieFromQueue(M),d.Notify.success(`${e.title} removed from Queue List`))}}catch(e){d.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await _.fetchDetails(M);await k.addToQueue(e),d.Notify.success(`${e.title} added to Queue List`),Q();await k.checkPresenseInWatched(M)&&(W(),await k.removeMovieFromWatched(M),d.Notify.success(`${e.title} removed from Watched List`))}}catch(e){d.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),T.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await k.removeMovieFromWatched(M),d.Notify.success("Movie removed from Watched List"),W()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await k.removeMovieFromQueue(M),d.Notify.success("Movie removed from Queue List"),D())}catch(e){console.log(e),d.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),o("gLIqC"),o("fobnT");var A=o("bcNH0"),O=o("eyjy7"),N=o("5Zbuc");d=o("7Y9D8");const F=(0,O.getAuth)(A.firebaseApp);(async()=>{(0,O.onAuthStateChanged)(F,(e=>{e?(N.refs.openModalLibraryBtn.classList.add("log-out"),N.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),N.refs.openModalLibraryBtn.classList.remove("log-in")):(N.refs.openModalLibraryBtn.classList.remove("log-out"),N.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),N.refs.openModalLibraryBtn.classList.add("log-in"))}))})();N.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,O.signOut)(F),d.Notify.success("You are loged out. See you soon"),setTimeout((()=>window.location.replace("./index.html")),2e3))})),o("4O2bx"),o("hvQmF"),o("ayzP0"),o("fLY7d"),o("37v9V");
//# sourceMappingURL=library.4e687d1f.js.map
