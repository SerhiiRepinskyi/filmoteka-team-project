var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=o),o("krGWQ"),o("7rYDH"),o("8j3eh");var s=o("8j3eh"),i=o("ayzP0");window.addEventListener("load",s.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var r=o("4O2bx"),n=o("dSs1Y");o("7Y9D8");var c=o("krGWQ"),d=o("eVEnd");o("ayzP0");c=o("krGWQ");function l(e){return e.map((({id:e,title:t,poster_path:a,release_date:o,genres:s})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,d.getMoviePoster)(a)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,d.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,d.getGenresLib)(s)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,d.getReleaseDate)(o)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}function u(){c.refs.plugWrapperLight.classList.remove("hidden")}const f=new(0,r.DatabaseAPI);async function m(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getWatchedList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.insertAdjacentHTML("beforeend",t)}else u();window.removeEventListener("load",m)}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}async function g(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getWatchedList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.innerHTML=t}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}n=o("dSs1Y"),c=o("krGWQ");async function L(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getQueueList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.insertAdjacentHTML("beforeend",t)}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}async function y(){n.Loading.pulse({svgColor:"#b92f2c"}),c.refs.libGalleryEl.innerHTML="",c.refs.plugWrapperLight.classList.add("hidden");try{const e=await f.getQueueList();if(0!==e.length){const t=l(e);c.refs.libGalleryEl.innerHTML=t}else u()}catch(e){Notify.failure("Ooops! Something went wrong. Try reloading page")}n.Loading.remove()}function h(e){const t=e.target;t===c.refs.buttonWatchedEl?(c.refs.libGalleryEl.innerHTML="",m(),c.refs.buttonWatchedEl.classList.contains("lib--active")||(c.refs.buttonWatchedEl.classList.add("lib--active"),c.refs.buttonQueueEl.classList.remove("lib--active"))):t===c.refs.buttonQueueEl&&(c.refs.libGalleryEl.innerHTML="",L(),c.refs.buttonQueueEl.classList.contains("lib--active")||(c.refs.buttonWatchedEl.classList.remove("lib--active"),c.refs.buttonQueueEl.classList.add("lib--active")))}o("7Y9D8"),(c=o("krGWQ")).refs.buttonWatchedEl.addEventListener("click",h),c.refs.buttonQueueEl.addEventListener("click",h),window.addEventListener("load",m),o("9AkgD"),o("hPewW"),o("bQoWw");var v=o("7rYDH"),p=o("bQoWw");const w=document.querySelector(".modal-card__backdrop"),b=document.querySelector(".library-cards__list"),E=document.querySelector("body"),T=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),M=new(0,v.FilmAPI);function W(){document.querySelector(".lib-watched").classList.contains("lib--active")?g():y()}b.addEventListener("click",(async function(e){if(M.youTubeID=e.target.closest(".card-item").dataset.id,localStorage.setItem("LOCALSTORAGE_KEY",`${e.target.closest(".card-item").dataset.id}`),!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const a=await M.fetchDetails(t);(0,p.default)(a),E.classList.add("no-scroll"),w.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(E.classList.remove("no-scroll"),w.classList.add("hidden"),W())})),T.addEventListener("click",(e=>{E.classList.remove("no-scroll"),w.classList.add("hidden"),W()})),w.addEventListener("click",(e=>{e.target===w&&(w.classList.add("hidden"),E.classList.remove("no-scroll"),W())}));r=o("4O2bx"),v=o("7rYDH");var _=o("7Y9D8");const S=new(0,v.FilmAPI),k=new(0,r.DatabaseAPI),q=document.querySelector(".library-cards__list"),Q=document.querySelector(".modal-card");let N="";const O=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"}),200)},C=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"}),200)},D=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"}),200)},G=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"}),200)};q.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{N=Number(e.target.closest(".card-item").dataset.id);const t=await k.checkPresenseInWatched(N);t?O():t||D();const a=await k.checkPresenseInQueue(N);a?C():a||G()}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),Q.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await S.fetchDetails(N);await k.addToWatched(e),_.Notify.success(`${e.title} added to Watched List`),O();await k.checkPresenseInQueue(N)&&(G(),await k.removeMovieFromQueue(N),_.Notify.success(`${e.title} removed from Queue List`))}}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await S.fetchDetails(N);await k.addToQueue(e),_.Notify.success(`${e.title} added to Queue List`),C();await k.checkPresenseInWatched(N)&&(D(),await k.removeMovieFromWatched(N),_.Notify.success(`${e.title} removed from Watched List`))}}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),Q.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await k.removeMovieFromWatched(N),_.Notify.success("Movie removed from Watched List"),D()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await k.removeMovieFromQueue(N),_.Notify.success("Movie removed from Queue List"),G())}catch(e){_.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),o("gLIqC"),o("fobnT");var A=o("bcNH0"),x=o("eyjy7"),H=o("5Zbuc");_=o("7Y9D8");const P=(0,x.getAuth)(A.firebaseApp);(async()=>{(0,x.onAuthStateChanged)(P,(e=>{e?(H.refs.openModalLibraryBtn.classList.add("log-out"),H.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),H.refs.openModalLibraryBtn.classList.remove("log-in")):(H.refs.openModalLibraryBtn.classList.remove("log-out"),H.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),H.refs.openModalLibraryBtn.classList.add("log-in"))}))})();H.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&_.Confirm.show("You are about to log out.","Proceed?","Log Out","Stay Logged In",(async()=>{await(0,x.signOut)(P),_.Notify.success("You have been logged out. See you soon. Redirecting to frontpage"),setTimeout((()=>window.location.replace("./index.html")),2e3)}),(()=>{}),{titleColor:"#b92f2c",fontFamily:"Roboto, sans-serif;",borderRadius:"10px",okButtonBackground:"#b92f2c"})})),o("4O2bx"),o("hvQmF"),o("ayzP0"),o("fLY7d"),o("37v9V");
//# sourceMappingURL=library.6453d16d.js.map
