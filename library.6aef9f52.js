var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},s=e.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in a){var s=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=s),s("krGWQ"),s("7rYDH"),s("8j3eh");var o=s("8j3eh"),i=s("ayzP0");window.addEventListener("load",o.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var r=s("4O2bx"),d=s("dSs1Y"),c=s("7Y9D8"),n=s("krGWQ"),l=s("eVEnd");s("ayzP0");n=s("krGWQ");function u(e){return e.map((({id:e,title:t,poster_path:a,release_date:s,genres:o})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,l.getMoviePoster)(a)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,l.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,l.getGenresLib)(o)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,l.getReleaseDate)(s)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}function m(){n.refs.plugWrapperLight.classList.remove("hidden")}const f=new(0,r.DatabaseAPI);async function L(){d.Loading.pulse({svgColor:"#b92f2c"}),n.refs.libGalleryEl.innerHTML="",n.refs.plugWrapperLight.classList.add("hidden");try{const e=u(await f.getWatchedList());n.refs.libGalleryEl.insertAdjacentHTML("beforeend",e),window.removeEventListener("load",L)}catch(e){m(),c.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}d.Loading.remove()}d=s("dSs1Y"),n=s("krGWQ"),c=s("7Y9D8");async function g(){d.Loading.pulse({svgColor:"#b92f2c"}),n.refs.libGalleryEl.innerHTML="",n.refs.plugWrapperLight.classList.add("hidden");try{const e=u(await f.getQueueList());n.refs.libGalleryEl.insertAdjacentHTML("beforeend",e)}catch(e){m(),c.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}d.Loading.remove()}function v(e){const t=e.target;t===n.refs.buttonWatchedEl?(n.refs.libGalleryEl.innerHTML="",L(),n.refs.buttonWatchedEl.classList.contains("lib--active")||(n.refs.buttonWatchedEl.classList.add("lib--active"),n.refs.buttonQueueEl.classList.remove("lib--active"))):t===n.refs.buttonQueueEl&&(n.refs.libGalleryEl.innerHTML="",g(),n.refs.buttonQueueEl.classList.contains("lib--active")||(n.refs.buttonWatchedEl.classList.remove("lib--active"),n.refs.buttonQueueEl.classList.add("lib--active")))}(n=s("krGWQ")).refs.buttonWatchedEl.addEventListener("click",v),n.refs.buttonQueueEl.addEventListener("click",v),window.addEventListener("load",L),s("9AkgD"),s("hPewW"),s("bQoWw");var h=s("7rYDH"),y=s("bQoWw");const w=document.querySelector(".modal-card__backdrop"),p=document.querySelector(".library-cards__list"),b=document.querySelector("body"),E=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),_=new(0,h.FilmAPI);p.addEventListener("click",(async function(e){if(console.log(e.target.closest(".cart-items")),_.youTubeID=e.target.closest(".card-item").dataset.id,localStorage.setItem("LOCALSTORAGE_KEY",`${e.target.closest(".card-item").dataset.id}`),!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const a=await _.fetchDetails(t);(0,y.default)(a),b.classList.add("no-scroll"),w.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(b.classList.remove("no-scroll"),w.classList.add("hidden"))})),E.addEventListener("click",(e=>{b.classList.remove("no-scroll"),w.classList.add("hidden")})),w.addEventListener("click",(e=>{e.target===w&&(w.classList.add("hidden"),b.classList.remove("no-scroll"))}));r=s("4O2bx"),h=s("7rYDH"),c=s("7Y9D8");const k=new(0,h.FilmAPI),T=new(0,r.DatabaseAPI),W=document.querySelector(".library-cards__list"),M=document.querySelector(".modal-card");let q="";const Q=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"}),150)},S=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"}),150)},D=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"}),150)},A=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"}),150)};W.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{q=Number(e.target.closest(".card-item").dataset.id);const t=await T.checkPresenseInWatched(q);t?Q():t||D();const a=await T.checkPresenseInQueue(q);a?S():a||A()}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),M.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await k.fetchDetails(q);await T.addToWatched(e),c.Notify.success(`${e.title} added to Watched List`),Q();await T.checkPresenseInQueue(q)&&(A(),await T.removeMovieFromQueue(q),c.Notify.success(`${e.title} removed from Queue List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await k.fetchDetails(q);await T.addToQueue(e),c.Notify.success(`${e.title} added to Queue List`),S();await T.checkPresenseInWatched(q)&&(D(),await T.removeMovieFromWatched(q),c.Notify.success(`${e.title} removed from Watched List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),M.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await T.removeMovieFromWatched(q),c.Notify.success("Movie removed from Watched List"),D()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await T.removeMovieFromQueue(q),c.Notify.success("Movie removed from Queue List"),A())}catch(e){console.log(e),c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),s("gLIqC"),s("fobnT");var O=s("bcNH0"),N=s("eyjy7"),F=s("5Zbuc");c=s("7Y9D8");const I=(0,N.getAuth)(O.firebaseApp);(async()=>{(0,N.onAuthStateChanged)(I,(e=>{e?(F.refs.openModalLibraryBtn.classList.add("log-out"),F.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),F.refs.openModalLibraryBtn.classList.remove("log-in")):(F.refs.openModalLibraryBtn.classList.remove("log-out"),F.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),F.refs.openModalLibraryBtn.classList.add("log-in"))}))})();F.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,N.signOut)(I),c.Notify.success("You are loged out. See you soon"),setTimeout((()=>window.location.replace("./index.html")),2e3))})),s("4O2bx"),s("hvQmF"),s("ayzP0"),s("fLY7d"),s("37v9V");
//# sourceMappingURL=library.6aef9f52.js.map
