var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired7c6=o),o("krGWQ"),o("7rYDH"),o("8j3eh");var s=o("8j3eh"),i=o("ayzP0");window.addEventListener("load",s.default),document.querySelector("#theme-toggle").addEventListener("click",i.onThemeBtnClick);var r=o("4O2bx"),n=o("dSs1Y"),c=o("7Y9D8"),d=o("krGWQ"),l=o("eVEnd");function u(e){return e.map((({id:e,title:t,poster_path:a,release_date:o,genres:s})=>`<li class='card-item' data-id='${e}'>\n        <div class='image__wrapper'>\n          <img class='movie__poster' src='${(0,l.getMoviePoster)(a)}' width='395' alt='${t}' loading='lazy' />\n        </div>\n        <div class='card-item__info-wrapper'>\n        <h2 class='card-item__title'>${(0,l.getMovieTitle)(t)}</h2>\n        <div class='card-item__info'>\n        <p class='card-item__genre'>${(0,l.getGenresLib)(s)}</p>\n        <span class='card-item__year'>|</span>\n        <p class='card-item__year'>${(0,l.getReleaseDate)(o)}</p>\n        </div>\n        </div>\n        </li>`)).join("")}const m=new(0,r.DatabaseAPI);async function f(){n.Loading.pulse({svgColor:"#b92f2c"});try{const e=u(await m.getWatchedList());d.refs.libGalleryEl.insertAdjacentHTML("beforeend",e),window.removeEventListener("load",f)}catch(e){c.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}n.Loading.remove()}n=o("dSs1Y"),d=o("krGWQ"),c=o("7Y9D8");async function v(){n.Loading.pulse({svgColor:"#b92f2c"});try{const e=u(await m.getQueueList());d.refs.libGalleryEl.insertAdjacentHTML("beforeend",e)}catch(e){c.Report.info("Filmoteka Info","This List is empty. Start adding some movies to see them here","OK")}n.Loading.remove()}function L(e){const t=e.target;t===d.refs.buttonWatchedEl?(d.refs.libGalleryEl.innerHTML="",f(),d.refs.buttonWatchedEl.classList.contains("lib--active")||(d.refs.buttonWatchedEl.classList.add("lib--active"),d.refs.buttonQueueEl.classList.remove("lib--active"))):t===d.refs.buttonQueueEl&&(d.refs.libGalleryEl.innerHTML="",v(),d.refs.buttonQueueEl.classList.contains("lib--active")||(d.refs.buttonWatchedEl.classList.remove("lib--active"),d.refs.buttonQueueEl.classList.add("lib--active")))}(d=o("krGWQ")).refs.buttonWatchedEl.addEventListener("click",L),d.refs.buttonQueueEl.addEventListener("click",L),window.addEventListener("load",f),o("9AkgD"),o("hPewW"),o("bQoWw");var g=o("7rYDH"),h=o("bQoWw");const y=document.querySelector(".modal-card__backdrop"),w=document.querySelector(".library-cards__list"),b=document.querySelector("body"),p=(document.querySelector(".modal-card"),document.querySelector(".modal-card__close-btn")),E=new(0,g.FilmAPI);w.addEventListener("click",(async function(e){if(!e.target.closest(".card-item"))return;let t=e.target.closest(".card-item").dataset.id;const a=await E.fetchDetails(t);(0,h.default)(a),b.classList.add("no-scroll"),y.classList.remove("hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(b.classList.remove("no-scroll"),y.classList.add("hidden"))})),p.addEventListener("click",(e=>{b.classList.remove("no-scroll"),y.classList.add("hidden")})),y.addEventListener("click",(e=>{e.target===y&&(y.classList.add("hidden"),b.classList.remove("no-scroll"))}));r=o("4O2bx"),g=o("7rYDH"),c=o("7Y9D8");const _=new(0,g.FilmAPI),k=new(0,r.DatabaseAPI),q=document.querySelector(".library-cards__list"),M=document.querySelector(".modal-card");let Q="";const T=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("add-to-watched"),e.classList.add("remove-from-watched"),e.textContent="Remove from watched"}),150)},W=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("add-to-queue"),e.classList.add("remove-from-queue"),e.textContent="Remove from queue"}),150)},S=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-watched-film]");e.classList.remove("remove-from-watched"),e.classList.add("add-to-watched"),e.textContent="Add to watched"}),150)},D=()=>{setTimeout((()=>{const e=document.querySelector("[data-card-modal-queue-film]");e.classList.remove("remove-from-queue"),e.classList.add("add-to-queue"),e.textContent="Add to queue"}),150)};q.addEventListener("click",(async e=>{if(e.target.closest(".card-item"))try{Q=Number(e.target.closest(".card-item").dataset.id);const t=await k.checkPresenseInWatched(Q);t?T():t||S();const a=await k.checkPresenseInQueue(Q);a?W():a||D()}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),M.addEventListener("click",(async e=>{if("cardModalWatchedFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-watched")){const e=await _.fetchDetails(Q);await k.addToWatched(e),c.Notify.success(`${e.title} added to Watched List`),T();await k.checkPresenseInQueue(Q)&&(D(),await k.removeMovieFromQueue(Q),c.Notify.success(`${e.title} removed from Queue List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}else if("cardModalQueueFilm"in e.target.dataset)try{if(e.target.classList.contains("add-to-queue")){const e=await _.fetchDetails(Q);await k.addToQueue(e),c.Notify.success(`${e.title} added to Queue List`),W();await k.checkPresenseInWatched(Q)&&(S(),await k.removeMovieFromWatched(Q),c.Notify.success(`${e.title} removed from Watched List`))}}catch(e){c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),M.addEventListener("click",(async e=>{try{"cardModalWatchedFilm"in e.target.dataset?e.target.classList.contains("remove-from-watched")&&(await k.removeMovieFromWatched(Q),c.Notify.success("Movie removed from Watched List"),S()):"cardModalQueueFilm"in e.target.dataset&&e.target.classList.contains("remove-from-queue")&&(await k.removeMovieFromQueue(Q),c.Notify.success("Movie removed from Queue List"),D())}catch(e){console.log(e),c.Notify.failure("Ooops! Something went wrong. Try reloading page")}})),o("gLIqC"),o("fobnT");var N=o("bcNH0"),A=o("eyjy7"),F=o("5Zbuc");c=o("7Y9D8");const O=(0,A.getAuth)(N.firebaseApp);(async()=>{(0,A.onAuthStateChanged)(O,(e=>{e?(F.refs.openModalLibraryBtn.classList.add("log-out"),F.refs.openModalLibraryBtn.setAttribute("title","Click to Log Out"),F.refs.openModalLibraryBtn.classList.remove("log-in")):(F.refs.openModalLibraryBtn.classList.remove("log-out"),F.refs.openModalLibraryBtn.setAttribute("title","Click to Log In"),F.refs.openModalLibraryBtn.classList.add("log-in"))}))})();F.refs.openModalLibraryBtn.addEventListener("click",(async e=>{e.target.classList.contains("log-out")&&(await(0,A.signOut)(O),c.Notify.success("You are loged out. See you soon"),setTimeout((()=>window.location.replace("./index.html")),2e3))})),o("4O2bx"),o("hvQmF"),o("ayzP0");
//# sourceMappingURL=library.fd604865.js.map
